# Copyright (c) 2022 The Hns Authors. All rights reserved.
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this file,
# You can obtain one at https://mozilla.org/MPL/2.0/.

if (!is_ios) {
  static_library("browser") {
    sources = [
      "ad_block_component_filters_provider.cc",
      "ad_block_component_filters_provider.h",
      "ad_block_custom_filters_provider.cc",
      "ad_block_custom_filters_provider.h",
      "ad_block_default_resource_provider.cc",
      "ad_block_default_resource_provider.h",
      "ad_block_engine.cc",
      "ad_block_engine.h",
      "ad_block_filter_list_catalog_provider.cc",
      "ad_block_filter_list_catalog_provider.h",
      "ad_block_filters_provider.cc",
      "ad_block_filters_provider.h",
      "ad_block_filters_provider_manager.cc",
      "ad_block_filters_provider_manager.h",
      "ad_block_localhost_filters_provider.cc",
      "ad_block_localhost_filters_provider.h",
      "ad_block_pref_service.cc",
      "ad_block_pref_service.h",
      "ad_block_regional_service_manager.cc",
      "ad_block_regional_service_manager.h",
      "ad_block_resource_provider.cc",
      "ad_block_resource_provider.h",
      "ad_block_service.cc",
      "ad_block_service.h",
      "ad_block_subscription_download_client.cc",
      "ad_block_subscription_download_client.h",
      "ad_block_subscription_download_manager.cc",
      "ad_block_subscription_download_manager.h",
      "ad_block_subscription_filters_provider.cc",
      "ad_block_subscription_filters_provider.h",
      "ad_block_subscription_service_manager.cc",
      "ad_block_subscription_service_manager.h",
      "ad_block_subscription_service_manager_observer.h",
      "adblock_stub_response.cc",
      "adblock_stub_response.h",
      "base_hns_shields_service.cc",
      "base_hns_shields_service.h",
      "blocked_domain_1pes_lifetime.cc",
      "blocked_domain_1pes_lifetime.h",
      "hns_farbling_service.cc",
      "hns_farbling_service.h",
      "hns_shields_p3a.cc",
      "hns_shields_p3a.h",
      "hns_shields_util.cc",
      "hns_shields_util.h",
      "cookie_list_opt_in_service.cc",
      "cookie_list_opt_in_service.h",
      "domain_block_controller_client.cc",
      "domain_block_controller_client.h",
      "domain_block_navigation_throttle.cc",
      "domain_block_navigation_throttle.h",
      "domain_block_page.cc",
      "domain_block_page.h",
      "domain_block_tab_storage.cc",
      "domain_block_tab_storage.h",
      "filter_list_catalog_entry.cc",
      "filter_list_catalog_entry.h",
      "filter_list_service.cc",
      "filter_list_service.h",
      "https_everywhere_recently_used_cache.h",
      "https_everywhere_service.cc",
      "https_everywhere_service.h",
    ]

    deps = [
      "//base",
      "//hns/components/hns_component_updater/browser",
      "//hns/components/hns_shields/adblock:rust_lib",
      "//hns/components/hns_shields/common",
      "//hns/components/hns_shields/common:mojom",
      "//hns/components/constants",
      "//hns/components/content_settings/core/common",
      "//hns/components/debounce/common",
      "//hns/components/ephemeral_storage",
      "//hns/components/https_upgrade_exceptions/browser",
      "//hns/components/l10n/common",
      "//hns/components/p3a",
      "//hns/components/p3a_utils",
      "//hns/components/resources:static_resources_grit",
      "//hns/components/resources:strings_grit",
      "//components/component_updater:component_updater",
      "//components/content_settings/core/browser",
      "//components/content_settings/core/common",
      "//components/pref_registry:pref_registry",
      "//components/prefs",
      "//components/proxy_config",
      "//components/security_interstitials/content:security_interstitial_page",
      "//components/security_interstitials/core",
      "//components/user_prefs",
      "//content/public/browser",
      "//mojo/public/cpp/bindings",
      "//third_party/abseil-cpp:absl",
      "//third_party/blink/public/mojom:mojom_platform_headers",
      "//third_party/leveldatabase",
      "//third_party/re2",
      "//third_party/zlib/google:zip",
      "//url",
    ]

    public_deps = [ ":component_installer" ]
  }
}

source_set("component_installer") {
  sources = [
    "ad_block_component_installer.cc",
    "ad_block_component_installer.h",
    "ad_block_service_helper.cc",
    "ad_block_service_helper.h",
    "filter_list_catalog_entry.cc",
    "filter_list_catalog_entry.h",
  ]
  deps = [
    "//base",
    "//hns/components/hns_component_updater/browser",
    "//hns/components/hns_shields/adblock:rust_lib",
    "//components/component_updater:component_updater",
    "//crypto",
  ]
}
